@page
@model PasswordManagerWeb.Pages.IndexModel
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery

@{
    ViewData["Title"] = "Вход и регистрация";
}

<h2>Вход</h2>
<form method="post" asp-page-handler="Login">
    <input name="__RequestVerificationToken" type="hidden" value="@Antiforgery.GetAndStoreTokens(HttpContext).RequestToken" />
    <div class="mb-3">
        <label asp-for="LoginUsername" class="form-label"></label>
        <input asp-for="LoginUsername" class="form-control" autocomplete="username" />
    </div>
    <div class="mb-3">
        <label asp-for="LoginPassword" class="form-label"></label>
        <input asp-for="LoginPassword" type="password" class="form-control" autocomplete="current-password" />
    </div>
    <button type="submit" class="btn btn-primary">Войти</button>
</form>

<hr />

<h2>Регистрация</h2>
<form method="post" asp-page-handler="Register">
    <input name="__RequestVerificationToken" type="hidden" value="@Antiforgery.GetAndStoreTokens(HttpContext).RequestToken" />
    <div class="mb-3">
        <label asp-for="RegisterUsername" class="form-label"></label>
        <input asp-for="RegisterUsername" class="form-control" autocomplete="username" />
    </div>
    <div class="mb-3">
        <label asp-for="RegisterPassword" class="form-label"></label>
        <input asp-for="RegisterPassword" type="password" class="form-control" autocomplete="new-password" />
    </div>
    <button type="submit" class="btn btn-secondary">Зарегистрироваться</button>
</form>

@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <div class="alert alert-danger mt-3">@Model.ErrorMessage</div>
}

@if (!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <div class="alert alert-success mt-3">@Model.SuccessMessage</div>
}
